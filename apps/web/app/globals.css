@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --color-background: 248 250 252;
    --color-surface: 241 245 249;
    --color-surface-hover: 226 232 240;
    --color-border: 226 232 240;
    --color-text-primary: 15 23 42;
    --color-text-secondary: 71 85 105;
    --color-text-muted: 148 163 184;
    color-scheme: light;
  }

  .dark {
    --color-background: 10 14 23;
    --color-surface: 18 24 39;
    --color-surface-hover: 26 34 51;
    --color-border: 30 41 66;
    --color-text-primary: 248 250 252;
    --color-text-secondary: 148 163 184;
    --color-text-muted: 100 116 139;
    color-scheme: dark;
  }

  html {
    @apply antialiased;
  }

  body {
    @apply bg-background text-text-primary transition-colors duration-200;
    font-feature-settings: 'cv02', 'cv03', 'cv04', 'cv11';
  }

  button {
    @apply rounded-lg transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-accent/60 focus-visible:ring-offset-0;
  }
}

@layer components {
  .app-page {
    @apply mx-auto w-full max-w-[1320px] space-y-6;
  }

  .page-shell {
    @apply rounded-2xl border border-border bg-surface p-4 shadow-sm sm:p-6;
  }

  .page-title {
    @apply text-2xl font-semibold text-text-primary;
  }

  .page-subtitle {
    @apply text-sm text-text-secondary;
  }

  .input {
    @apply w-full px-3 py-2 text-sm bg-surface border border-border rounded-lg text-text-primary placeholder-text-muted focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent transition-colors;
  }

  .card {
    @apply bg-surface border border-border rounded-xl p-6;
  }

  .kpi-grid {
    @apply grid gap-2 sm:gap-3 [grid-template-columns:repeat(auto-fit,minmax(140px,1fr))];
  }

  .kpi-card {
    @apply rounded-xl border border-border bg-surface px-2.5 py-2.5 sm:px-3.5 sm:py-3;
  }

  .kpi-row-mobile {
    @apply flex gap-2 overflow-x-auto pb-1 sm:grid sm:gap-3 sm:overflow-visible sm:pb-0 [grid-template-columns:repeat(auto-fit,minmax(140px,1fr))];
  }

  .kpi-row-mobile > * {
    min-width: 148px;
  }

  @screen sm {
    .kpi-row-mobile > * {
      min-width: 0;
    }
  }

  .kpi-card-accent {
    @apply border-accent/50 bg-accent/10;
  }

  .kpi-card-warning {
    @apply border-warning/50 bg-warning/10;
  }

  .kpi-card-danger {
    @apply border-red-500/40 bg-red-500/10;
  }

  .kpi-label {
    @apply text-[10px] font-medium uppercase tracking-wide text-text-secondary;
  }

  .kpi-value {
    @apply mt-0.5 text-lg font-semibold text-text-primary sm:text-xl;
  }

  .kpi-detail {
    @apply mt-0.5 text-[10px] text-text-muted;
  }

  .menu-section-title {
    @apply mt-3 mb-2 flex items-center gap-2 rounded-md bg-surface-hover/70 px-2 py-1 text-[10px] font-semibold uppercase tracking-[0.18em] text-text-muted;
  }

  .menu-section-title::before {
    content: '';
    width: 0.35rem;
    height: 0.35rem;
    border-radius: 9999px;
    background: rgb(var(--color-text-muted));
    opacity: 0.75;
  }

  .menu-item {
    @apply block rounded-lg px-3 py-2.5 text-sm font-medium transition-colors;
  }

  .menu-item-active {
    @apply border border-accent/60 bg-accent/15 font-semibold text-accent shadow-[inset_4px_0_0_0_rgba(15,76,129,0.95),0_8px_20px_rgba(15,76,129,0.22)];
  }

  .dark .menu-item-active {
    @apply border-accent/80 bg-accent text-white shadow-[inset_4px_0_0_0_rgba(255,255,255,0.95),0_8px_24px_rgba(15,76,129,0.45)];
  }

  .btn-primary {
    @apply inline-flex items-center justify-center rounded-lg bg-accent px-4 py-2 text-sm font-semibold text-white shadow-sm transition-colors hover:bg-accent-hover disabled:opacity-50 disabled:cursor-not-allowed;
  }

  .btn-secondary {
    @apply inline-flex items-center justify-center rounded-lg border border-border bg-surface px-4 py-2 text-sm font-medium text-text-primary transition-colors hover:bg-surface-hover disabled:opacity-50 disabled:cursor-not-allowed;
  }

  .btn-ghost {
    @apply inline-flex items-center justify-center rounded-lg px-3 py-2 text-sm font-medium text-text-primary transition-colors hover:bg-surface-hover disabled:opacity-50 disabled:cursor-not-allowed;
  }
}

@layer utilities {
  .text-balance {
    text-wrap: balance;
  }

  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }

  button:not([class*='bg-']):not([class*='border-']) {
    background-color: rgb(var(--color-surface));
    color: rgb(var(--color-text-primary));
    border: 1px solid rgb(var(--color-border));
  }

  button:not([class*='bg-']):not([class*='border-']):hover {
    background-color: rgb(var(--color-surface-hover));
  }

  button:not([class*='bg-']):not([class*='border-']):not([class*='px-']):not([class*='py-']):not([class*='p-']) {
    padding: 0.5rem 0.75rem;
  }

  /* Legacy utilities: keep old pages readable in dark mode without touching every file. */
  .dark .bg-white {
    background-color: rgb(var(--color-surface)) !important;
  }

  .dark .bg-gray-50,
  .dark .bg-gray-100,
  .dark .bg-slate-50,
  .dark .bg-slate-100 {
    background-color: rgb(var(--color-surface-hover)) !important;
  }

  .dark .border-gray-100,
  .dark .border-gray-200,
  .dark .border-slate-200,
  .dark .divide-gray-100,
  .dark .divide-gray-200 {
    border-color: rgb(var(--color-border)) !important;
  }

  .dark .text-gray-900,
  .dark .text-slate-900 {
    color: rgb(var(--color-text-primary)) !important;
  }

  .dark .text-gray-700,
  .dark .text-gray-600,
  .dark .text-gray-500,
  .dark .text-slate-700,
  .dark .text-slate-600 {
    color: rgb(var(--color-text-secondary)) !important;
  }

  .dark .text-gray-400,
  .dark .text-slate-400 {
    color: rgb(var(--color-text-muted)) !important;
  }
}
